apiVersion: serverless.kyma-project.io/v1alpha1
kind: GitRepository
metadata:
  name: kyma
  namespace: apps
spec:
  url: https://github.com/dktrkranz/kyma.git
---
apiVersion: serverless.kyma-project.io/v1alpha1
kind: Function
metadata:
  name: idconverter
  namespace: apps
spec:
  runtime: python39
  buildResources:
    limits:
      cpu: 1100m
      memory: 1100Mi
    requests:
      cpu: 700m
      memory: 700Mi
  resources:
    limits:
      cpu: 400m
      memory: 512Mi
    requests:
      cpu: 200m
      memory: 256Mi
  minReplicas: 3
  maxReplicas: 5
  source: kyma
  type: git
  reference: main
  baseDir: IDConverter
---
apiVersion: gateway.kyma-project.io/v1alpha1
kind: APIRule
metadata:
  name: idconverter
  namespace: apps
spec:
  gateway: kyma-gateway.kyma-system.svc.cluster.local
  rules:
  - accessStrategies:
    - config: {}
      handler: allow
    methods:
    - GET
    path: /.*
  service:
    host: idconverter.ce01c7f.kyma.ondemand.com
    name: idconverter
    port: 80
